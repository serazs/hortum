-- RAYFIELD UI LIBRARY
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "GHOST HORTUM V4 | GLOBAL RANGE",
   LoadingTitle = "Hortum Modu Hazırlanıyor...",
   LoadingSubtitle = "by serazs",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "GhostHortum",
      FileName = "HortumConfig"
   }
})

-- VARIABLES (AYARLAR)
local LP = game.Players.LocalPlayer
local RunService = game:GetService("RunService")
local tornadoActive = false
local tornadoRadius = 20
local tornadoSpeed = 12
local pullRange = 20000 -- Tüm haritayı kapsayan devasa çekim alanı

-- TABS
local MainTab = Window:CreateTab("Tornado Control", 4483345998)

-- SECTION
MainTab:CreateSection("Hortum Ana Kontrolleri")

-- TOGGLE: HORTUMU AÇ/KAPAT
MainTab:CreateToggle({
   Name = "Global Hortumu Başlat (FE EVERYONE SEES)",
   CurrentValue = false,
   Flag = "TornadoToggle",
   Callback = function(Value)
      tornadoActive = Value
   end,
})

-- SLIDER: RADIUS (GENİŞLİK)
MainTab:CreateSlider({
   Name = "Hortum Genişliği",
   Min = 5,
   Max = 200,
   Default = 25,
   Increment = 1,
   ValueName = "Birim",
   Flag = "RadiusSlider",
   Callback = function(Value)
      tornadoRadius = Value
   end,
})

-- SLIDER: SPEED (HIZ)
MainTab:CreateSlider({
   Name = "Dönüş Hızı",
   Min = 1,
   Max = 50,
   Default = 12,
   Increment = 1,
   ValueName = "Hız",
   Flag = "SpeedSlider",
   Callback = function(Value)
      tornadoSpeed = Value
   end,
})

-- HORTUM MOTORU (ANA FİZİK DÖNGÜSÜ)
RunService.Stepped:Connect(function()
    if tornadoActive then
        local char = LP.Character
        local root = char and char:FindFirstChild("HumanoidRootPart")
        
        if root then
            local rootPos = root.Position
            
            for _, part in pairs(workspace:GetDescendants()) do
                -- Koşul: BasePart olacak, sabitlenmemiş (Anchored: false) olacak, karakterin olmayacak
                if part:IsA("BasePart") and not part.Anchored and not part:IsDescendantOf(char) then
                    
                    -- Mesafe kontrolü (Sınırsız çekim için)
                    local dist = (part.Position - rootPos).Magnitude
                    if dist < pullRange then
                        pcall(function()
                            -- Parçanın fiziksel sahipliğini (Network Ownership) zorla
                            part.Velocity = Vector3.new(0, 8, 0) -- Havada asılı tutma
                            
                            -- Matematiksel Hortum Yörüngesi (Sin/Cos)
                            local angle = tick() * tornadoSpeed + (part.Position.Y * 0.4)
                            local targetPos = rootPos + Vector3.new(
                                math.sin(angle) * tornadoRadius,
                                math.sin(tick() * 2) * 12 + 10, -- Yukarı aşağı dalgalanma efekti
                                math.cos(angle) * tornadoRadius
                            )
                            
                            -- Parçayı hedef noktaya çok hızlı fırlat (Herkes görür)
                            part.Velocity = (targetPos - part.Position) * 30
                            part.RotVelocity = Vector3.new(0, 15, 0) -- Kendi etrafında da dönsün
                        end)
                    end
                end
            end
        end
    end
end)

Rayfield:LoadConfiguration()
