-- RAYFIELD UI LIBRARY
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "GLOBAL PULL V1 | SERAZS",
   LoadingTitle = "Pull Modu Hazırlanıyor...",
   LoadingSubtitle = "by serazs",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "GlobalPull",
      FileName = "PullConfig"
   }
})

-- VARIABLES
local Players = game:GetService("Players")
local LP = Players.LocalPlayer
local RunService = game:GetService("RunService")
local pullActive = false
local pullRadius = 25
local pullSpeed = 15
local pullRange = 20000 -- haritanın tamamını kapsayan çekim alanı

-- TABS
local MainTab = Window:CreateTab("Pull Control", 4483345998)
MainTab:CreateSection("Global Pull Settings")

-- TOGGLE
MainTab:CreateToggle({
   Name = "Global Pull Aç/Kapat",
   CurrentValue = false,
   Flag = "PullToggle",
   Callback = function(Value)
      pullActive = Value
   end,
})

-- SLIDER: Radius
MainTab:CreateSlider({
   Name = "Pull Radius",
   Min = 5,
   Max = 200,
   Default = 25,
   Increment = 1,
   ValueName = "Birim",
   Flag = "RadiusSlider",
   Callback = function(Value)
      pullRadius = Value
   end,
})

-- SLIDER: Speed
MainTab:CreateSlider({
   Name = "Pull Speed",
   Min = 1,
   Max = 50,
   Default = 15,
   Increment = 1,
   ValueName = "Hız",
   Flag = "SpeedSlider",
   Callback = function(Value)
      pullSpeed = Value
   end,
})

-- Helper: Çekilecek objeleri önceden listele (optimize)
local function getPullTargets()
    local targets = {}
    -- Tüm workspace objelerini listele
    for _, part in pairs(workspace:GetDescendants()) do
        if part:IsA("BasePart") and not part.Anchored and part ~= LP.Character:FindFirstChild("HumanoidRootPart") then
            table.insert(targets, part)
        end
    end
    -- Oyuncuların HumanoidRootPart’lerini ekle
    for _, plr in pairs(Players:GetPlayers()) do
        local char = plr.Character
        if char and char:FindFirstChild("HumanoidRootPart") and plr ~= LP then
            table.insert(targets, char.HumanoidRootPart)
        end
    end
    return targets
end

-- MAIN LOOP
RunService.Heartbeat:Connect(function()
    if pullActive then
        local root = LP.Character and LP.Character:FindFirstChild("HumanoidRootPart")
        if not root then return end

        local targets = getPullTargets()
        local rootPos = root.Position

        for _, target in pairs(targets) do
            local dist = (target.Position - rootPos).Magnitude
            if dist <= pullRange then
                -- Hedef pozisyon hesapla (radius içinde dalgalanma efekti)
                local angle = tick() * pullSpeed + (target.Position.Y * 0.4)
                local targetPos = rootPos + Vector3.new(
                    math.sin(angle) * pullRadius,
                    math.sin(tick()*2) * 5 + 3,
                    math.cos(angle) * pullRadius
                )

                -- Yavaşça çek (velocity ile)
                pcall(function()
                    target.Velocity = (targetPos - target.Position) * 20
                    target.RotVelocity = Vector3.new(0,15,0)
                end)
            end
        end
    end
end)

Rayfield:LoadConfiguration()
