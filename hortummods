local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "GHOST RING V4 | RE-MODDED",
   LoadingTitle = "Fizik Motoru Hazırlanıyor...",
   LoadingSubtitle = "by serazs",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "GhostRing",
      FileName = "RingConfig"
   }
})

-- DEĞİŞKENLER (Kodun Orijinal Ayarları)
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local radius = 50
local height = 100
local rotationSpeed = 1
local attractionStrength = 1000
local ringPartsEnabled = false
local parts = {}

-- NETWORK OWNERSHIP (Orijinal Kodun Kalbi)
if not getgenv().Network then
    getgenv().Network = {
        BaseParts = {},
        Velocity = Vector3.new(14.46262424, 14.46262424, 14.46262424)
    }
    
    RunService.Heartbeat:Connect(function()
        sethiddenproperty(LocalPlayer, "SimulationRadius", math.huge)
        for _, Part in pairs(getgenv().Network.BaseParts) do
            if Part:IsDescendantOf(workspace) then
                Part.Velocity = getgenv().Network.Velocity
            end
        end
    end)
end

-- PARÇA YÖNETİMİ
local function RetainPart(Part)
    if Part:IsA("BasePart") and not Part.Anchored and Part:IsDescendantOf(workspace) then
        if Part.Parent == LocalPlayer.Character or Part:IsDescendantOf(LocalPlayer.Character) then
            return false
        end
        Part.CustomPhysicalProperties = PhysicalProperties.new(0, 0, 0, 0, 0)
        Part.CanCollide = false
        return true
    end
    return false
end

local function addPart(part)
    if RetainPart(part) then
        if not table.find(parts, part) then
            table.insert(parts, part)
        end
    end
end

for _, part in pairs(workspace:GetDescendants()) do addPart(part) end
workspace.DescendantAdded:Connect(addPart)

-- ARAYÜZ (RAYFIELD)
local Tab = Window:CreateTab("Ring Control", 4483345998)

Tab:CreateSection("Ana Kontroller")

Tab:CreateToggle({
   Name = "Hortumu Başlat (Ring Parts)",
   CurrentValue = false,
   Flag = "RingToggle",
   Callback = function(Value)
      ringPartsEnabled = Value
   end,
})

Tab:CreateSlider({
   Name = "Hortum Genişliği (Radius)",
   Min = 5,
   Max = 300,
   Default = 50,
   Increment = 1,
   ValueName = "Birim",
   Callback = function(Value)
      radius = Value
   end,
})

Tab:CreateSlider({
   Name = "Dönüş Hızı",
   Min = 1,
   Max = 20,
   Default = 1,
   Increment = 1,
   ValueName = "Hız",
   Callback = function(Value)
      rotationSpeed = Value
   end,
})

Tab:CreateSection("Gelişmiş Ayarlar")

Tab:CreateSlider({
   Name = "Çekim Gücü",
   Min = 100,
   Max = 5000,
   Default = 1000,
   Increment = 50,
   ValueName = "Güç",
   Callback = function(Value)
      attractionStrength = Value
   end,
})

-- ANA HORTUM DÖNGÜSÜ (Orijinal Matematik)
RunService.Heartbeat:Connect(function()
    if not ringPartsEnabled then return end

    local humanoidRootPart = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if humanoidRootPart then
        local tornadoCenter = humanoidRootPart.Position
        for _, part in pairs(parts) do
            if part.Parent and not part.Anchored then
                local pos = part.Position
                local distance = (Vector3.new(pos.X, tornadoCenter.Y, pos.Z) - tornadoCenter).Magnitude
                local angle = math.atan2(pos.Z - tornadoCenter.Z, pos.X - tornadoCenter.X)
                local newAngle = angle + math.rad(rotationSpeed)
                local targetPos = Vector3.new(
                    tornadoCenter.X + math.cos(newAngle) * math.min(radius, distance),
                    tornadoCenter.Y + (height * (math.abs(math.sin((pos.Y - tornadoCenter.Y) / height)))),
                    tornadoCenter.Z + math.sin(newAngle) * math.min(radius, distance)
                )
                local directionToTarget = (targetPos - part.Position).unit
                part.Velocity = directionToTarget * attractionStrength
            end
        end
    end
end)

Rayfield:Notify({Title = "Hile Yüklendi", Content = "Temiz sürüm hazır. Chat trolü kaldırıldı!", Duration = 5})
